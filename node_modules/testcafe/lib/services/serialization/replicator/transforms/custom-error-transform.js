"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class CustomErrorTransform {
    constructor() {
        this.type = 'CustomError';
    }
    _isBuiltInError(type) {
        // @ts-ignore
        return !!global[type];
    }
    shouldTransform(_, val) {
        // @ts-ignore
        return val instanceof Error && (val.isTestCafeError || !this._isBuiltInError(val.name));
    }
    toSerializable(err) {
        const errorData = Object.assign({}, err);
        errorData.name = errorData.name || err.name;
        errorData.message = errorData.message || err.message;
        errorData.stack = errorData.stack || err.stack;
        return errorData;
    }
    fromSerializable(val) {
        return val;
    }
}
exports.default = CustomErrorTransform;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tLWVycm9yLXRyYW5zZm9ybS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9zZXJpYWxpemF0aW9uL3JlcGxpY2F0b3IvdHJhbnNmb3Jtcy9jdXN0b20tZXJyb3ItdHJhbnNmb3JtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBcUIsb0JBQW9CO0lBR3JDO1FBQ0ksSUFBSSxDQUFDLElBQUksR0FBRyxhQUFhLENBQUM7SUFDOUIsQ0FBQztJQUVPLGVBQWUsQ0FBRSxJQUFZO1FBQ2pDLGFBQWE7UUFDYixPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDMUIsQ0FBQztJQUVNLGVBQWUsQ0FBRSxDQUFVLEVBQUUsR0FBWTtRQUM1QyxhQUFhO1FBQ2IsT0FBTyxHQUFHLFlBQVksS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDNUYsQ0FBQztJQUVNLGNBQWMsQ0FBRSxHQUFVO1FBQzdCLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBRXpDLFNBQVMsQ0FBQyxJQUFJLEdBQU0sU0FBUyxDQUFDLElBQUksSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDO1FBQy9DLFNBQVMsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLE9BQU8sSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDO1FBQ3JELFNBQVMsQ0FBQyxLQUFLLEdBQUssU0FBUyxDQUFDLEtBQUssSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDO1FBRWpELE9BQU8sU0FBUyxDQUFDO0lBQ3JCLENBQUM7SUFFTSxnQkFBZ0IsQ0FBRSxHQUFZO1FBQ2pDLE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQztDQUNKO0FBOUJELHVDQThCQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1c3RvbUVycm9yVHJhbnNmb3JtIHtcbiAgICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogc3RyaW5nO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgdGhpcy50eXBlID0gJ0N1c3RvbUVycm9yJztcbiAgICB9XG5cbiAgICBwcml2YXRlIF9pc0J1aWx0SW5FcnJvciAodHlwZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcmV0dXJuICEhZ2xvYmFsW3R5cGVdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzaG91bGRUcmFuc2Zvcm0gKF86IHVua25vd24sIHZhbDogdW5rbm93bik6IGJvb2xlYW4ge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHJldHVybiB2YWwgaW5zdGFuY2VvZiBFcnJvciAmJiAodmFsLmlzVGVzdENhZmVFcnJvciB8fCAhdGhpcy5faXNCdWlsdEluRXJyb3IodmFsLm5hbWUpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9TZXJpYWxpemFibGUgKGVycjogRXJyb3IpOiBFcnJvciB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIGVycik7XG5cbiAgICAgICAgZXJyb3JEYXRhLm5hbWUgICAgPSBlcnJvckRhdGEubmFtZSB8fCBlcnIubmFtZTtcbiAgICAgICAgZXJyb3JEYXRhLm1lc3NhZ2UgPSBlcnJvckRhdGEubWVzc2FnZSB8fCBlcnIubWVzc2FnZTtcbiAgICAgICAgZXJyb3JEYXRhLnN0YWNrICAgPSBlcnJvckRhdGEuc3RhY2sgfHwgZXJyLnN0YWNrO1xuXG4gICAgICAgIHJldHVybiBlcnJvckRhdGE7XG4gICAgfVxuXG4gICAgcHVibGljIGZyb21TZXJpYWxpemFibGUgKHZhbDogdW5rbm93bik6IHVua25vd24ge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbn1cbiJdfQ==